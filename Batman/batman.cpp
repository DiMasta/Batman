#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <cmath>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <climits>
#include <ctime>

#define M_PI 3.14159265358979323846

using namespace std;

const int DISPLAY_INPUT = 0;
const int USE_HARDCODED_INPUT = 0;

enum Direction {
	U = 0,
	UR,
	R,
	DR,
	D,
	DL,
	L,
	UL,
};

class Game {
public:
	Game();
	~Game();

	void initGame();
	void gameLoop();
	void getGameInput();
	void getTurnInput();
	void turnBegin();
	void makeTurn();
	void turnEnd();
	void play();

	void debug() const;

private:
	int width;
	int height;
	int jumpsLeft;
	int xCoord;
	int yCoord;
	string bombDirection;

	int turnsCount;
};

//*************************************************************************************************************
//*************************************************************************************************************

Game::Game() : turnsCount(0) {
}

//*************************************************************************************************************
//*************************************************************************************************************

Game::~Game() {
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::initGame() {
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::gameLoop() {
	while (true) {
		getTurnInput();
		turnBegin();
		makeTurn();
		turnEnd();
	}
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::getGameInput() {
	if (USE_HARDCODED_INPUT) {
		width = 4;
		height = 8;
		jumpsLeft = 40;
		xCoord = 2;
		yCoord = 3;
	}
	else {
		cin >> width >> height >> jumpsLeft >> xCoord >> yCoord;
	}

	if (DISPLAY_INPUT) {
		cerr << width << " " << height << endl;
		cerr << jumpsLeft << endl;
		cerr << xCoord << " " << yCoord << endl;
	}
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::getTurnInput() {
	if (USE_HARDCODED_INPUT) {
		bombDirection = "DR";
	}
	else {
		cin >> bombDirection;
	}

	if (DISPLAY_INPUT) {
		cerr << bombDirection << endl;
	}
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::turnBegin() {
	if (bombDirection.find('U') != string::npos) {
		yCoord /= 2;
	}

	if (bombDirection.find('D') != string::npos) {
		yCoord += (height - yCoord) / 2;
	}

	if (bombDirection.find('L') != string::npos) {
		xCoord /= 2;
	}

	if (bombDirection.find('R') != string::npos) {
		xCoord += (width - xCoord) / 2;
	}
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::makeTurn() {
	cout << xCoord << " " << yCoord << endl;
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::turnEnd() {
	++turnsCount;
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::play() {
	initGame();
	getGameInput();
	gameLoop();
}

//*************************************************************************************************************
//*************************************************************************************************************

void Game::debug() const {
}

//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------------

#ifdef TESTS
#include "debug.h"
#endif // TESTS

int main(int argc, char** argv) {
#ifdef TESTS
	doctest::Context context;
	int res = context.run();
#else
	Game game;
	game.play();
#endif // TESTS

	return 0;
}